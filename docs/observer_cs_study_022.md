# ç¬¬22ç« ï¼šã‚¢ãƒ©ãƒ¼ãƒˆã«å‘ãæŒ‡æ¨™ã€å‘ã‹ãªã„æŒ‡æ¨™ğŸš¨ğŸ“£

## ã“ã®ç« ã§ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã“ã¨ğŸ¯âœ¨

* ã€Œ**èµ·ã“ã—ã¦ã„ã„ã‚¢ãƒ©ãƒ¼ãƒˆ**ã€ã¨ã€Œ**ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§çœºã‚ã‚Œã°ã„ã„æŒ‡æ¨™**ã€ã‚’è¦‹åˆ†ã‘ã‚‰ã‚Œã‚‹ğŸ‘€
* **ã‚¢ãƒ©ãƒ¼ãƒˆå€™è£œã‚’3ã¤ã ã‘**ã«çµã‚Œã‚‹ï¼ˆé³´ã‚‰ã—ã™ãåœ°ç„å›é¿ğŸ¥²â¡ï¸ğŸ˜Šï¼‰
* ã—ãã„å€¤ãƒ»æ™‚é–“çª“ãƒ»ãƒã‚¤ã‚ºå¯¾ç­–ã¾ã§å«ã‚ã¦ã€**â€œå®Ÿæˆ¦ã§ä½¿ãˆã‚‹å½¢â€**ã«ã§ãã‚‹ğŸ’ªğŸ”¥

---

## 1) ã¾ãšå¤§å‰æï¼šã‚¢ãƒ©ãƒ¼ãƒˆã®ç›®çš„ã£ã¦ä½•ï¼ŸğŸ””ğŸ§ 

ã‚¢ãƒ©ãƒ¼ãƒˆã¯ã€Œ**é€šçŸ¥**ã€ã˜ã‚ƒãªãã¦ã€Œ**è¡Œå‹•ã‚¹ã‚¤ãƒƒãƒ**ã€ã ã‚ˆã€œï¼ğŸ•¹ï¸âœ¨

âœ… è‰¯ã„ã‚¢ãƒ©ãƒ¼ãƒˆ = **äººãŒä»Šã™ãä½•ã‹ã§ãã‚‹**ï¼ˆæ­¢è¡€ãƒ»åˆ‡ã‚Šåˆ†ã‘ãƒ»ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
âŒ ãƒ€ãƒ¡ãªã‚¢ãƒ©ãƒ¼ãƒˆ = **è¦‹ã¦ã‚‚å›°ã‚‹**ï¼**åŸå› ãŒå¤šã™ãã‚‹**ï¼**é »ç¹ã«èª¤å ±**

ãã—ã¦è¶…é‡è¦ãªè€ƒãˆæ–¹ğŸ‘‡

## ã€ŒåŸå› ã€ã‚ˆã‚Šã€Œç—‡çŠ¶ã€ã‚’ã‚¢ãƒ©ãƒ¼ãƒˆã«ã™ã‚‹ğŸ’¡

* åŸå› ï¼ˆCPUé«˜ã„ãƒ»ãƒ¡ãƒ¢ãƒªå¤šã„ï¼‰ã£ã¦ã€**åˆ¥ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå›°ã£ã¦ãªã„**ã“ã¨ã‚‚ã‚ã‚‹ã‚ˆã­ï¼ŸğŸ« 
* ç—‡çŠ¶ï¼ˆã‚¨ãƒ©ãƒ¼å¢—ãƒ»é…ã„ãƒ»ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼‰ã¯ **ãƒ¦ãƒ¼ã‚¶ãƒ¼å½±éŸ¿ãã®ã‚‚ã®**âœ¨
  ãªã®ã§ã€Œç—‡çŠ¶ãƒ™ãƒ¼ã‚¹ã§å°‘ãªãã€ãŒãŠã™ã™ã‚ï¼ ([Google Cloud][1])

---

## 2) 1ç§’ã§åˆ¤å®šã™ã‚‹ â€œã‚¢ãƒ©ãƒ¼ãƒˆå‘ãâ€ ãƒã‚§ãƒƒã‚¯âœ…â±ï¸

![ç”»åƒã‚’æŒ¿å…¥äºˆå®š](./picture/observer_cs_study_022_alert_decision.png)

```mermaid
flowchart TD
    Start([ä½•ã‹èµ·ããŸï¼ğŸ¤¯]) --> Q1{"Userå½±éŸ¿ã‚ã‚‹ï¼Ÿ<br>(ç—‡çŠ¶ï¼Ÿ)"}
    Q1 -- No --> Dashboard[Dashbordã§è¦‹ã‚‹ ğŸ“Š]
    Q1 -- Yes --> Q2{"ä»Šã™ãå¯¾å¿œã§ãã‚‹ï¼Ÿ<br>(Actionable?)"}
    Q2 -- No --> Dashboard
    Q2 -- Yes --> Alert[Alerté³´ã‚‰ã™ ğŸš¨]
    
    style Alert fill:#ffcccc,stroke:#ff0000
    style Dashboard fill:#e6f3ff,stroke:#333
```

æ¬¡ã®5ã¤ã€**å…¨éƒ¨Yes**ãªã‚‰ã‚¢ãƒ©ãƒ¼ãƒˆå‘ãï¼ğŸ˜

1. **ãƒ¦ãƒ¼ã‚¶ãƒ¼å½±éŸ¿ï¼ˆç—‡çŠ¶ï¼‰ã«ç›´çµ**ã—ã¦ã‚‹ï¼Ÿï¼ˆé…ã„/å¤±æ•—/åˆ©ç”¨ä¸èƒ½ï¼‰
2. ãã‚ŒãŒèµ·ããŸã‚‰ **ä»Šã™ãå¯¾å¿œã—ãŸã„**ï¼Ÿï¼ˆå¤œä¸­ã§ã‚‚èµ·ãã‚‹ä¾¡å€¤ï¼‰ğŸ˜ªâ¡ï¸ğŸ˜±
3. **ã—ãã„å€¤**ã‚’èª¬æ˜ã§ãã‚‹ï¼Ÿï¼ˆSLO/ä»•æ§˜/éå»ãƒ‡ãƒ¼ã‚¿ï¼‰ğŸ“
4. **ãƒã‚¤ã‚ºã«å¼·ã„**ï¼Ÿï¼ˆã‚¹ãƒ‘ã‚¤ã‚¯1ç™ºã§é³´ã‚‰ãªã„ï¼‰âš¡ï¸ğŸ§¯
5. é³´ã£ãŸã‚‰ **æ‰‹é †ï¼ˆRunbookï¼‰**ãŒã‚ã‚‹ï¼Ÿï¼ˆæœ€åˆã®3æ‰‹ãŒæ›¸ã‘ã‚‹ï¼‰ğŸ§­

---

## 3) ã‚¢ãƒ©ãƒ¼ãƒˆã«å‘ãæŒ‡æ¨™ãŸã¡ğŸ¥‡ğŸš¨ï¼ˆåŸºæœ¬ã“ã‚Œï¼ï¼‰

## A. ã‚¨ãƒ©ãƒ¼ç‡ï¼ˆå¤±æ•—ã®å‰²åˆï¼‰ğŸŸ¥

* **ã€Œå¤±æ•—ãŒå¢—ãˆãŸã€**ã¯ç—‡çŠ¶ã©çœŸã‚“ä¸­
* ã‚«ã‚¦ãƒ³ãƒˆã˜ã‚ƒãªãã¦ **ç‡ï¼ˆå‰²åˆï¼‰**ãŒå¼·ã„âœ¨

  * ä¾‹ï¼š5xxç‡ã€ä¾‹å¤–ç‡ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆç‡ã€ä¾å­˜å…ˆã‚¨ãƒ©ãƒ¼ç‡ ãªã©

**Prometheusã§ã¯ `rate()` ãŒåŸºæœ¬**ï¼ˆã‚¢ãƒ©ãƒ¼ãƒˆå‘ãï¼‰ã ã‚ˆã€œï¼ ([prometheus.io][2])

---

## B. ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ï¼ˆé…ã•ï¼‰ğŸ•°ï¸ğŸ¢

* ã“ã‚Œã‚‚ç—‡çŠ¶ã©çœŸã‚“ä¸­âœ¨
* ãŸã ã—æ³¨æ„ï¼

  * âŒ å¹³å‡ï¼ˆaverageï¼‰ã ã‘ã§ã‚¢ãƒ©ãƒ¼ãƒˆã¯å±é™ºï¼ˆé…ã„äººãŒåŸ‹ã‚‚ã‚Œã‚‹ğŸ˜‡ï¼‰
  * âœ… **ãƒ‘ãƒ¼ã‚»ãƒ³ã‚¿ã‚¤ãƒ«ï¼ˆp95/p99ï¼‰**ãŒæ‰±ã„ã‚„ã™ã„

ãƒ‘ãƒ¼ã‚»ãƒ³ã‚¿ã‚¤ãƒ«ã¯ **Histogram** ãŒå¼·ã„ï¼

* Histogram ã¯ã‚µãƒ¼ãƒå´ã§ `histogram_quantile()` ã§æ±‚ã‚ã‚‰ã‚Œã‚‹ä»•çµ„ã¿ãŒèª¬æ˜ã•ã‚Œã¦ã‚‹ã‚ˆ ([prometheus.io][3])

---

## C. Saturationï¼ˆè©°ã¾ã‚Šãƒ»é£½å’Œï¼‰ğŸš§ğŸ“›

* CPUã‚„ãƒ¡ãƒ¢ãƒªãã®ã‚‚ã®ã˜ã‚ƒãªãã¦ã€**ã€Œè©°ã¾ã‚ŠãŒãƒ¦ãƒ¼ã‚¶ãƒ¼å½±éŸ¿ã«ã¤ãªãŒã‚‹å½¢ã€**ãŒã‚¢ãƒ©ãƒ¼ãƒˆå‘ãâœ¨

  * ä¾‹ï¼šã‚­ãƒ¥ãƒ¼é•·ãŒå¢—ãˆç¶šã‘ã‚‹ã€åŒæ™‚å‡¦ç†ãŒä¸Šé™ã«è²¼ã‚Šä»˜ãã€ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ¼ãƒ«æ¯æ¸‡ãªã©

---

## 4) ã‚¢ãƒ©ãƒ¼ãƒˆã« â€œå‘ã‹ãªã„ã“ã¨ãŒå¤šã„â€ æŒ‡æ¨™ãŸã¡ğŸ™…â€â™€ï¸ğŸ“‰

## ã€ŒåŸå› ã£ã½ã„ã€ã‚‚ã®ã¯ã€åŸºæœ¬ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡ŒãğŸ§¸

* CPUä½¿ç”¨ç‡ãŒé«˜ã„ğŸ”¥
* ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãŒå¤šã„ğŸ§ 
* GCå›æ•°ãŒå¤šã„ğŸ§¹
* ã‚¹ãƒ¬ãƒƒãƒ‰æ•°ãŒå¢—ãˆãŸğŸ§µ
* Pod/ãƒ—ãƒ­ã‚»ã‚¹æ•°ãŒæ¸›ã£ãŸï¼ˆãŸã ã—å¯ç”¨æ€§ã«ç›´çµãªã‚‰ä¾‹å¤–ï¼‰

ã“ã‚Œã‚‰ã¯ã€ŒåŸå› å€™è£œãŒå¤šã™ãã‚‹ã€ã®ã§ã€èª¤å ±ã‚„ãƒã‚¤ã‚ºã«ãªã‚ŠãŒã¡ã€‚
**ç—‡çŠ¶ï¼ˆã‚¨ãƒ©ãƒ¼/é…å»¶ï¼‰ã¨ã‚»ãƒƒãƒˆã§**ä½¿ã†ã®ãŒæ°—æŒã¡ã„ã„ï¼ ([Google Cloud][1])

---

## 5) ã—ãã„å€¤ã¨æ™‚é–“çª“ï¼šã“ã“ãŒå‹è² ğŸ”¥â³

## â€œç¬é–“å€¤â€ã§é³´ã‚‰ã•ãªã„ï¼ˆãƒã‚¤ã‚ºå¯¾ç­–ï¼‰ğŸ§¯

ã‚¢ãƒ©ãƒ¼ãƒˆã¯ã ã„ãŸã„ğŸ‘‡ã®å½¢ãŒå®‰å®šï¼

* **ç‡ï¼ˆratioï¼‰**ã‚’
* **æ™‚é–“çª“ï¼ˆä¾‹ï¼š5åˆ†ï¼‰**ã§ãªã‚‰ã—ã¦
* **ä¸€å®šæ™‚é–“ç¶šã„ãŸã‚‰** or **è¤‡æ•°çª“ã§ä¸€è‡´ã—ãŸã‚‰**ç™ºç«

Prometheusçš„ã«ã¯ã€Œ`irate()`ã¯ã‚°ãƒ©ãƒ•ç”¨ã€ã€Œã‚¢ãƒ©ãƒ¼ãƒˆã¯`rate()`ã€ãŒæ¨å¥¨ã ã‚ˆ ([prometheus.io][2])

---

## 6) â€œSLOãƒ™ãƒ¼ã‚¹â€ã«ã™ã‚‹ã¨ã‚¢ãƒ©ãƒ¼ãƒˆè¨­è¨ˆãŒä¸€æ°—ã«ãƒ©ã‚¯ğŸ˜ğŸ“

ã“ã“ã€2026æ™‚ç‚¹ã§ã‚‚è¶…ç‹é“ï¼âœ¨
Googleã®SRE Workbookã¯ã€ŒSLOã‚’ã‚¢ãƒ©ãƒ¼ãƒˆã«è½ã¨ã™æ–¹æ³•ã€ã‚’æ®µéšçš„ã«èª¬æ˜ã—ã¦ã¦ã€**Burn rateï¼ˆç‡ƒç„¼ç‡ï¼‰**ã¾ã§ä¸å¯§ã«æ‰±ã£ã¦ã‚‹ã‚ˆ ([Google SRE][4])

## Burn rateã£ã¦ãªã«ï¼ŸğŸ”¥

* ã€Œè¨±ã•ã‚Œã‚‹å¤±æ•—ï¼ˆã‚¨ãƒ©ãƒ¼ãƒã‚¸ã‚§ãƒƒãƒˆï¼‰ã€ã‚’ **ã©ã‚Œãã‚‰ã„ã®é€Ÿåº¦ã§æº¶ã‹ã—ã¦ã‚‹ã‹**
* ä¾‹ï¼šSLO 99.9%ï¼ˆè¨±å®¹å¤±æ•—ç‡0.1% = 0.001ï¼‰ãªã‚‰

  * å¤±æ•—ç‡ãŒ 1%ï¼ˆ0.01ï¼‰ã ã¨ **burn rate = 0.01 / 0.001 = 10** ã¿ãŸã„ãªæ„Ÿã˜ğŸ’¡ ([Google SRE][4])

## â€œ`for:`ã§â—¯åˆ†ç¶šã„ãŸã‚‰â€ ã ã‘ã«é ¼ã‚‹ã®ã¯å±é™ºâš ï¸

SRE Workbookã§ã‚‚ã€æŒç¶šæ¡ä»¶ï¼ˆdurationï¼‰ã ã‘ã§ä½œã‚‹ã¨

* é‡å¤§éšœå®³ã§ã‚‚æ¤œçŸ¥ãŒé…ã„
* ã¡ã‚‡ã„å›å¾©ã§ã‚¿ã‚¤ãƒãƒ¼ãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œç¶šã‘ã¦æ¤œçŸ¥ã§ããªã„
  ã¿ãŸã„ãªæ¬ ç‚¹ãŒã‚ã‚‹ã‚ˆã€ã¨ãƒãƒƒã‚­ãƒªæ›¸ã„ã¦ã‚‹ã‚ˆ ([Google SRE][4])

---

## 7) é¡Œæã‚¢ãƒ—ãƒªã§ã€Œã‚¢ãƒ©ãƒ¼ãƒˆå€™è£œ3ã¤ã€ã‚’æ±ºã‚ã‚ˆã†ğŸ¥¹â¡ï¸ğŸ˜Šï¼ˆæ¼”ç¿’ãƒ‘ãƒ¼ãƒˆï¼‰

ç¬¬21ç« ã® â€œæˆåŠŸ/å¤±æ•—/é…å»¶â€ ã‚’æ€ã„å‡ºã—ã¦ã­ğŸ§ªâœ¨
ã“ã“ã‹ã‚‰ **3ã¤ã ã‘**é¸ã¶ã‚ˆï¼

## å€™è£œAï¼šã‚¨ãƒ©ãƒ¼ç‡ï¼ˆ5xx / ä¾‹å¤–ç‡ï¼‰ğŸš¨ğŸŸ¥

* ç›®çš„ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¤±æ•—ã—ã¦ã‚‹ã®ã‚’å³æ¤œçŸ¥
* åˆ¤æ–­ï¼šç—‡çŠ¶ã©çœŸã‚“ä¸­âœ…

## å€™è£œBï¼šp95ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ï¼ˆé…å»¶ï¼‰ğŸ¢â±ï¸

* ç›®çš„ï¼šé…ãã¦ä¸æº€ãŒçˆ†ç™ºã™ã‚‹å‰ã«æ¤œçŸ¥
* åˆ¤æ–­ï¼šç—‡çŠ¶ã©çœŸã‚“ä¸­âœ…ï¼ˆå¹³å‡ã˜ã‚ƒãªãp95/p99æ¨å¥¨ï¼‰ ([prometheus.io][3])

## å€™è£œCï¼šé£½å’Œã®äºˆå…†ï¼ˆè©°ã¾ã‚Šç³»ï¼‰ğŸš§

* ç›®çš„ï¼šé…å»¶â†’ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã«è¡Œãå‰ã«æ­¢è¡€
* åˆ¤æ–­ï¼šå˜ä½“ã ã¨åŸå› å¯„ã‚Šãªã®ã§ã€**ç—‡çŠ¶ã¨ã‚»ãƒƒãƒˆ**ãŒãŠã™ã™ã‚âœ¨

---

## 8) ä¾‹ï¼šPromQLï¼ˆé›°å›²æ°—ã ã‘æ´ã‚ã‚Œã°OKï¼‰ğŸ§©

â€» â€œå½¢â€ãŒå¤§äº‹ï¼æš—è¨˜ã—ãªãã¦OKã ã‚ˆã€œğŸ«¶

## 8.1 ã‚¨ãƒ©ãƒ¼ç‡ã‚¢ãƒ©ãƒ¼ãƒˆï¼ˆç‡ã§è¦‹ã‚‹ï¼‰ğŸŸ¥

```yaml
- alert: HighErrorRate
  expr: |
    sum(rate(http_requests_total{status=~"5.."}[5m]))
      /
    sum(rate(http_requests_total[5m]))
    > 0.01
  for: 5m
```

* **rate() ã‚’ä½¿ã†**ï¼ˆã‚¢ãƒ©ãƒ¼ãƒˆå‘ãï¼‰ ([prometheus.io][2])

---

## 8.2 ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ï¼ˆHistogram + p95ï¼‰ğŸ¢

```promql
histogram_quantile(
  0.95,
  sum(rate(http_request_duration_seconds_bucket[5m])) by (le)
) > 0.5
```

* Histogram/Summaryã®é•ã„ã¨ã€`histogram_quantile()` å‰æã®è©±ã¯Prometheuså…¬å¼ãŒã‚ã‹ã‚Šã‚„ã™ã„ã‚ˆ ([prometheus.io][3])

---

## 8.3 SLO/Burn rateï¼ˆè€ƒãˆæ–¹ï¼‰ğŸ”¥

SRE Workbookã®æµã‚Œã ã¨ã€SLOã‚’ã‚¢ãƒ©ãƒ¼ãƒˆã«ã™ã‚‹æ™‚ã¯

* **æœ‰æ„ãªã‚¨ãƒ©ãƒ¼ãƒã‚¸ã‚§ãƒƒãƒˆæ¶ˆè²»**ã‚’æ¤œçŸ¥ã™ã‚‹
* ãã®ãŸã‚ã« burn rate ã‚’ä½¿ã†
  â€¦ãŒç‹é“ã ã‚ˆ ([Google SRE][4])

---

## 9) C#å´ï¼šãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ â€œã‚¢ãƒ©ãƒ¼ãƒˆå‘ãâ€ ã«å‡ºã™ã‚³ãƒ„ğŸ”§ğŸ“ˆ

.NETã¯ `System.Diagnostics.Metrics` ãŒåŸºç¤ã ã‚ˆï¼ˆå…¬å¼ã®èª¬æ˜ã‚ã‚Šï¼‰ ([Microsoft Learn][5])
OpenTelemetry .NETã§ã‚‚ **Metricsã¯ã“ã®APIå‰æ**ã§ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ãŒã¾ã¨ã¾ã£ã¦ã‚‹ã‚ˆ ([OpenTelemetry][6])

## 9.1 æœ€å°ãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼ˆã‚«ã‚¦ãƒ³ãƒˆï¼‹å¤±æ•—ï¼‹æ™‚é–“ï¼‰ğŸ§¸

```csharp
using System.Diagnostics.Metrics;

public static class AppMetrics
{
    public static readonly Meter Meter = new("Sample.Api", "1.0.0");

    public static readonly Counter<long> RequestsTotal =
        Meter.CreateCounter<long>("app_requests_total");

    public static readonly Counter<long> ErrorsTotal =
        Meter.CreateCounter<long>("app_errors_total");

    public static readonly Histogram<double> RequestDurationMs =
        Meter.CreateHistogram<double>("app_request_duration_ms", unit: "ms");
}
```

**è¨­è¨ˆãƒã‚¤ãƒ³ãƒˆâœ¨**

* ã‚¢ãƒ©ãƒ¼ãƒˆã«ä½¿ã†ãªã‚‰ã€Œæ–‡å­—åˆ—ãƒ­ã‚°ã€ã˜ã‚ƒãªãã¦

  * **ç·æ•°ï¼ˆCounterï¼‰**
  * **å¤±æ•—æ•°ï¼ˆCounterï¼‰**
  * **æ™‚é–“åˆ†å¸ƒï¼ˆHistogramï¼‰**
    ã‚’æƒãˆã‚‹ã®ãŒå¼·ã„ğŸ’ª

---

## 9.2 Prometheusã«å‡ºã™ï¼ˆOpenTelemetryï¼‰ğŸ§©

Prometheusã‚¹ã‚¯ãƒ¬ã‚¤ãƒ—ç”¨ã®ASP.NET Core exporterã¯NuGetã§ã‚‚å…¬å¼ã§æä¾›ã•ã‚Œã¦ã‚‹ã‚ˆ ([nuget.org][7])
ã¾ãŸã€OTelå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã« `UseOpenTelemetryPrometheusScrapingEndpoint` ãŒè¼‰ã£ã¦ã‚‹ã‚ˆ ([OpenTelemetry][8])

ï¼ˆæœ¬ç•ªã¯CollectorçµŒç”±ãŒãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã€ã‚‚å…¬å¼ã§æ¨ã—ã¦ã‚‹ã‚ˆï¼‰ ([OpenTelemetry][9])

---

## 10) æœ€å¾Œã®ãƒŸãƒ‹æ¼”ç¿’ğŸ“âœ¨ï¼ˆã“ã“ãŒæœ¬ç•ªï¼ï¼‰

## æ¼”ç¿’1ï¼šå‘ã/ä¸å‘ãã‚’ä»•åˆ†ã‘ğŸ—‚ï¸

æ¬¡ã‚’ã€Œã‚¢ãƒ©ãƒ¼ãƒˆå‘ã / ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰å‘ãã€ã«åˆ†é¡ã—ã¦ã­ğŸ‘‡

* CPUä½¿ç”¨ç‡
* 5xxç‡
* å¹³å‡ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·
* p95ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·
* ä¾‹å¤–æ•°
* GCå›æ•°

ğŸ‘‰ ãƒ’ãƒ³ãƒˆï¼š**ç—‡çŠ¶ã¯ã‚¢ãƒ©ãƒ¼ãƒˆ**ã€**åŸå› ã¯ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰** ([Google Cloud][1])

---

## æ¼”ç¿’2ï¼šã€Œ3ã¤ã ã‘ã€é¸ã¶ğŸ¥²â¡ï¸ğŸ˜Š

é¡Œæã‚¢ãƒ—ãƒªã«å¯¾ã—ã¦ã€æ¬¡ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§3ã¤æ›¸ã„ã¦ã­ğŸ“

* ã‚¢ãƒ©ãƒ¼ãƒˆåï¼š
* ä½•ãŒèµ·ãã¦ã‚‹ï¼Ÿï¼ˆç—‡çŠ¶ï¼‰
* ãƒ¦ãƒ¼ã‚¶ãƒ¼å½±éŸ¿ã¯ï¼Ÿ
* ã—ãã„å€¤ï¼ˆä»®ï¼‰ï¼š
* è¦‹ã‚‹ã¹ãæ¬¡ã®ç”»é¢ï¼ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰/ãƒ­ã‚°/ãƒˆãƒ¬ãƒ¼ã‚¹ï¼‰ï¼š

---

## 11) AIæ´»ç”¨ï¼ˆCopilot/Codexå‘ã‘ï¼‰ğŸ¤–âœ¨

* ã€Œã“ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¯ã‚¢ãƒ©ãƒ¼ãƒˆå‘ãï¼Ÿå‘ã‹ãªã„ï¼Ÿç†ç”±ã‚‚ã€ã£ã¦èãğŸ‘‚
* ã€Œp95ã®PromQLä½œã£ã¦ã€â†’ ä½œã‚‰ã›ã¦ã€**ã—ãã„å€¤ã¨çª“ã ã‘äººãŒæ±ºã‚ã‚‹**ğŸ§ 
* ã€Œã‚¢ãƒ©ãƒ¼ãƒˆæœ¬æ–‡ï¼ˆä½•ãŒèµ·ãã¦ã€ä½•ã‚’è¦‹ã¦ã€ä½•ã‚’ã™ã‚‹ï¼‰ã‚’çŸ­ãã€ã£ã¦æ•´å½¢âœ‚ï¸

---

## ã¾ã¨ã‚ğŸ’–

* ã‚¢ãƒ©ãƒ¼ãƒˆã¯ **â€œè¡Œå‹•ã‚¹ã‚¤ãƒƒãƒâ€**ğŸ””
* åŸºæœ¬ã¯ **ç—‡çŠ¶ï¼ˆã‚¨ãƒ©ãƒ¼ç‡ãƒ»é…å»¶ãƒ»é£½å’Œã®å½±éŸ¿ï¼‰** ã‚’é³´ã‚‰ã™ ([Google Cloud][1])
* Prometheusãªã‚‰ **`rate()`ä¸­å¿ƒ**ã€Histogramã§p95/p99ã‚‚æ‰±ã„ã‚„ã™ã„ ([prometheus.io][2])
* è¿·ã£ãŸã‚‰ **SLO/Burn rate**ã§æ•´ãˆã‚‹ã¨ã‚¹ãƒƒã‚­ãƒªã™ã‚‹ã‚ˆ ([Google SRE][4])

æ¬¡ã®ç« ï¼ˆ23ç« ï¼‰ã¯ã€ã„ã‚ˆã„ã‚ˆãƒˆãƒ¬ãƒ¼ã‚¹ç·¨ã«å…¥ã£ã¦ã€Œé…ã„ã®ã¯ã©ã“ï¼Ÿã€ã‚’åœ°å›³ã§è¿½ã„ã‹ã‘ã‚‹æ„Ÿã˜ã«ãªã‚‹ã‚ˆã€œï¼ğŸ§µğŸ§­âœ¨

[1]: https://cloud.google.com/blog/topics/developers-practitioners/why-focus-symptoms-not-causes?utm_source=chatgpt.com "Why Focus on Symptoms, Not Causes?"
[2]: https://prometheus.io/docs/prometheus/latest/querying/functions/?utm_source=chatgpt.com "Query functions"
[3]: https://prometheus.io/docs/practices/histograms/?utm_source=chatgpt.com "Histograms and summaries"
[4]: https://sre.google/workbook/alerting-on-slos/ "Google SRE - Prometheus Alerting: Turn SLOs into Alerts"
[5]: https://learn.microsoft.com/en-us/dotnet/core/diagnostics/metrics-instrumentation?utm_source=chatgpt.com "Creating Metrics - .NET"
[6]: https://opentelemetry.io/docs/languages/dotnet/metrics/best-practices/?utm_source=chatgpt.com "Best practices - Metrics"
[7]: https://www.nuget.org/packages/OpenTelemetry.Exporter.Prometheus.AspNetCore?utm_source=chatgpt.com "OpenTelemetry.Exporter.Prometheus.AspNetCore 1.14.0- ..."
[8]: https://opentelemetry.io/ja/docs/languages/dotnet/exporters/?utm_source=chatgpt.com "Exporters"
[9]: https://opentelemetry.io/docs/languages/dotnet/exporters/?utm_source=chatgpt.com "Exporters"
