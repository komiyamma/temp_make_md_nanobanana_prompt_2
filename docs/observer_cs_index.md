# オブザーバビリティ設計（ログ/メトリクス/トレース）30章アウトライン🌈✨

## 導入・土台編（1〜7章）🌱🧠

### 第1章：オブザーバビリティって何？👀✨（監視との違い）

* ねらい：Logs/Metrics/Tracesの役割を“ひとことで”言える
* 学ぶ：後付けがしんどい理由／「原因に辿り着ける」って何？
* ミニ演習：自分の言葉で定義を1文で書く📝
* AI活用：定義の添削＆短文化🤖✂️

### 第2章：3本柱の“得意技”を掴む🪵📈🧵

* ねらい：ログ＝調査、メトリクス＝健康診断、トレース＝旅の地図
* 学ぶ：何が起きた？（ログ）／どれくらい？（メト）／どこで？（トレ）
* ミニ演習：同じ障害を3視点で説明してみる🎭

### 第3章：何を測るべき？ゴールデンシグナル入門🌟📏

* ねらい：「測るもの迷子」にならない
* 学ぶ：Latency/Traffic/Errors/Saturationの感覚
* ミニ演習：題材アプリの“最重要3指標”を決める🎯
* AI活用：指標候補→優先順位づけ🤖🥇

### 第4章：観測の“境界”を作ろう🚧✨（どこで測る？）

* ねらい：計測ポイントを設計として決められる
* 学ぶ：入口（HTTP）／業務／外部I/O（DB・外部API）
* ミニ演習：紙に“計測ポイント地図”を書く🗺️🖊️

### 第5章：題材アプリ準備（Windows + Visual Studio）🧱💻

* ねらい：観測対象をサクッと用意
* 学ぶ：最小Web API（/health、/workなど）
* ミニ演習：わざと失敗するルートも作る😈

### 第6章：開発での確認方法（まずはローカル）🧪👀

* ねらい：観測データが出てるか自分で確かめられる
* 学ぶ：ローカルログ、簡易メトリクス表示、トレースの見え方
* ミニ演習：成功/失敗/遅延の3パターンを起こす⏱️💥

### 第7章：観測設計の“ルール化”📏✨（チームに説明できる形）

* ねらい：後からブレない“観測ポリシー”を作る
* 学ぶ：命名、必須項目、出す/出さない基準
* ミニ演習：1枚ルール（A4相当）を作る📄
* AI活用：ポリシー文章を読みやすく整形🤖🧹

---

## ログ編（8〜15章）🪵📝

### 第8章：良いログ/ダメログ😇😱（ログは“検索するため”）

* ねらい：読書ログじゃなく捜査ログにする
* 学ぶ：情報の粒度／ノイズ／検索性
* 演習：ダメログを良いログにリライト✍️

### 第9章：ログレベル設計🎚️（Trace/Debug/Info/Warn/Error）

* ねらい：本番で“出しすぎ地獄”回避
* 学ぶ：運用視点のレベル基準／誰が読むか
* 演習：自分のアプリ用のレベル表を作る📋

### 第10章：構造化ログ入門🧱🪵（キーと値で残す）

* ねらい：「あとで絞り込めるログ」にする
* 学ぶ：文字列連結よりプロパティ（フィールド）
* 演習：ログに入れるキー候補を列挙🏷️

### 第11章：相関ID（Correlation ID）🔗✨（同じ処理を追える）

* ねらい：1リクエストのログを1本の糸で追う
* 学ぶ：requestId/operationIdの考え方
* 演習：必須の共通フィールドを決める✅

### 第12章：例外ログ設計💥🧯（スタックトレースだけにしない）

* ねらい：障害時に“次の一手”が分かる
* 学ぶ：例外分類／原因特定に必要な情報
* 演習：例外ログテンプレ（必須項目）を作る🧾

### 第13章：個人情報・秘密情報の扱い🔒🫣（マスキング設計）

* ねらい：やらかし防止！安全なログにする
* 学ぶ：出しちゃダメな情報／マスク方針
* 演習：NG一覧＆マスクルールを作る🚫

### 第14章：ログの“粒度”設計🍚✨（出す量のバランス）

* ねらい：情報不足とノイズの間を取る
* 学ぶ：入口/出口/外部I/Oの最小ログ
* 演習：1リクエストで最低限残すログを決める🧩

### 第15章：ログから調査する手順🕵️‍♀️🪵（現場の型）

* ねらい：「どこから見る？」が決まってる状態に
* 学ぶ：フィルタ→時系列→相関ID→原因候補
* 演習：ミニ障害をログだけで追ってみる🔍

---

## メトリクス編（16〜22章）📈⏱️

### 第16章：メトリクスの基本📊（カウント/ゲージ/ヒストグラム）✨

* ねらい：ログと役割分担できる
* 学ぶ：集計の強さ／アラートに向く理由
* 演習：3種類の使い分けを例で整理🧠

### 第17章：何を測る？REDっぽく考える🟥🟨🟩✨

* ねらい：APIの健康状態が見える指標を選べる
* 学ぶ：Rate（量）/Errors（失敗）/Duration（時間）
* 演習：題材アプリでREDを作る（指標設計だけ）🧾

### 第18章：.NETでメトリクスを出す考え方🔧📈（設計中心）

* ねらい：どこに置くか・何を記録するかを決められる
* 学ぶ：入口/業務/外部I/Oの計測ポイント再確認
* 演習：計測の責務を“薄く”保つ作戦を作る🪶

### 第19章：命名ルールと単位設計🏷️📏（読みやすさ＝正義）✨

* ねらい：後から見ても意味が取れる
* 学ぶ：名前の一貫性／単位（ms、countなど）
* 演習：命名テンプレを作る🧩

### 第20章：ラベル（タグ）設計と cardinality 注意 ⚠️🏷️

* ねらい：メトリクスが爆発しないようにする
* 学ぶ：ユーザーID等をラベルに入れる危険
* 演習：OKラベル/NGラベル表を作る📋

### 第21章：ローカルでの検証（負荷・失敗・遅延）🧪📈✨

* ねらい：メトリクスが“反応する”のを体感
* 学ぶ：成功率が落ちる／遅延が伸びるとどう見える？
* 演習：3シナリオを作って見比べる👀✨

### 第22章：アラートに向く指標、向かない指標🚨📣

* ねらい：鳴らす指標を間違えない
* 学ぶ：瞬間値 vs 率／期間平均／ノイズ対策
* 演習：アラート候補を“3つだけ”選ぶ🥲➡️😊

---

## トレース編（23〜27章）🧵🧭

### 第23章：トレース入門🧵✨（Trace/Spanの世界）

* ねらい：1リクエストの“旅”をイメージできる
* 学ぶ：親子Span／どこで時間を食ってるか
* 演習：Spanの候補を洗い出す🗺️

### 第24章：Spanの切り方と命名🧠🏷️（設計のコツ）

* ねらい：トレースが読みやすくなる
* 学ぶ：細かすぎ問題／粗すぎ問題のバランス
* 演習：Span名テンプレを決める✅

### 第25章：コンテキスト伝播🔗🌬️（つながる条件を理解）

* ねらい：トレースが途中で途切れない
* 学ぶ：HTTP越し／非同期越しでの“繋がり”
* 演習：つながらない時の原因チェック表を作る🔍

### 第26章：トレースに意味を足す（属性）🎒✨

* ねらい：原因に近づく情報を載せる
* 学ぶ：何でも載せない／必要最小限のタグ設計
* 演習：必須属性セットを決める🧩

### 第27章：トレースでボトルネックを特定する🧯⏱️🧵

* ねらい：遅い場所を“指差し”できる
* 学ぶ：スパン時間→外部I/O→業務処理の切り分け
* 演習：遅延シナリオを作って追う🐢➡️🚀

---

## 統合・運用編（28〜30章）🧩🚀

### 第28章：3本柱を“つなげる設計”🧩🔗（ログ×メト×トレ）

* ねらい：1つの障害を3視点で一貫して追える
* 学ぶ：共通キー（相関ID、traceId）／同じ用語・同じ粒度
* 演習：障害調査の導線（メト→ログ→トレ）を固定する🧭

### 第29章：ダッシュボード設計📊✨（見る順番を設計する）

* ねらい：見れば状況が分かる画面構成にする
* 学ぶ：トップ指標→深掘り指標→調査リンク（ログ/トレ）
* 演習：ワイヤーフレームを描く（紙でOK）📝

### 第30章：障害対応の型＋ふりかえり（ポストモーテム）🧯🔁

* ねらい：調査→復旧→再発防止まで回せる
* 学ぶ：原因・影響・検知・対応・恒久対策の書き方
* 演習：ミニ障害を“手順通り”に調査してレポート作成📄
* AI活用：ポストモーテムの文章を整える🤖✨

---

## ちょい補足😊✨（詰め込み対策はどうなった？）

最終盤（運用系）に詰め込みが集中しないように、**アラートは22章、ダッシュボードは29章、障害演習＋振り返りは30章** に分散してあるよ🚨📊🧯
だから「最後の数章だけ急に重い！」が起きにくい設計にしてある👌✨

