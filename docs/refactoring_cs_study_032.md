# ç¬¬32ç« ï¼šswitch ã¨ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã§åˆ†å²ã‚’æ•´ç†ï¼ˆèª­ã¿ã‚„ã™ã•ï¼‰ğŸ›ï¸âœ¨

## ã“ã®ç« ã§ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã“ã¨ğŸ¯ğŸ’–

* if/else ã®é•·ã„é€£é–ã‚’ **switch** ã«ã¾ã¨ã‚ã¦ã€è¦‹é€šã—ã‚’è‰¯ãã™ã‚‹ğŸ‘€âœ¨
* **switchå¼**ï¼ˆå€¤ã‚’è¿”ã™switchï¼‰ã§ã€Œåˆ†å²ï¼å€¤ã®æ±ºå®šã€ã‚’ã‚¹ãƒƒã‚­ãƒªæ›¸ã‘ã‚‹ğŸ§ ğŸ“¦
* **ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ**ï¼ˆå‹ãƒ»å€¤ãƒ»æ¡ä»¶ãƒ»å½¢ï¼‰ã§ã€Œèª­ã¿ã‚„ã™ã„æ¡ä»¶åˆ†å²ã€ãŒä½œã‚Œã‚‹ğŸ§©ğŸŒˆ ([Microsoft Learn][1])
* Visual Studio ã® **Quick Actionsï¼ˆCtrl+.ï¼‰** ã§ ifâ†’switch å¤‰æ›ã‚’ä¸€ç¬ã§ã‚„ã‚‹ğŸ’¨ğŸª„ ([Microsoft Learn][2])

---

## ã¾ãšçµè«–ï¼šifé€£é–ãŒãƒ„ãƒ©ã„ç†ç”±ğŸ˜µâ€ğŸ’«ğŸ’¦

![refactoring_cs_study_032_logic_flow](./picture/refactoring_cs_study_032_logic_flow.png)

if/else ãŒå¢—ãˆã‚‹ã¨â€¦

* æ¡ä»¶ãŒä¸Šã‹ã‚‰ä¸‹ã¾ã§é•·ãã¦ **ç›®ãŒè¿·å­**ğŸ‘€ğŸŒ€
* ä¼¼ãŸæ¡ä»¶ãŒæ··ã–ã£ã¦ **é‡è¤‡ï¼†ãƒã‚°ã®æ¸©åºŠ**ğŸ§¨
* ã€Œã©ã®æ¡ä»¶ãŒå…ˆã«å½“ãŸã‚‹ï¼Ÿã€ãŒåˆ†ã‹ã‚Šã¥ã‚‰ã„ï¼ˆé †ç•ªã«ä¾å­˜ã—ãŒã¡ï¼‰ğŸ“Œ

ãã“ã§ **switch + ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ** ã®å‡ºç•ªï¼ğŸ‰
ã€Œã“ã®å…¥åŠ›ã¯ã©ã®â€œå½¢ï¼ˆãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰â€ï¼Ÿã€ã£ã¦è€ƒãˆæ–¹ã§ã€åˆ†å²ãŒèª­ã¿ã‚„ã™ããªã‚Šã¾ã™ğŸ§âœ¨ ([Microsoft Learn][1])

```mermaid
graph TD
    subgraph "If-Else Chain (Complex)"
    I["if (a) ..\nelse if (b) ..\nelse if (c) .."]
    end
    subgraph "Switch Expression (Clear)"
    S["input switch\n{\n  a => ..\n  b => ..\n  _ => ..\n}"]
    end
    I -- "Pattern Match" --> S
```

---

## switch ã¯2ç¨®é¡ã‚ã‚‹ã‚ˆğŸ§ğŸ€

![refactoring_cs_study_032_switch_types](./picture/refactoring_cs_study_032_switch_types.png)


![](./picture/refactoring_cs_study_032_matching.png)
### 1) switchã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆï¼ˆæ˜”ãªãŒã‚‰ï¼‰ğŸ§±

* `case:` ã®ä¸­ã«å‡¦ç†ã‚’æ›¸ã‘ã‚‹ï¼ˆè¤‡æ•°è¡Œã®å‡¦ç†å‘ãï¼‰ğŸ› ï¸
* `break;` ãŒå¿…è¦ï¼ˆå¿˜ã‚Œã‚‹ã¨å±ãªã„æ™‚ä»£ã¯çµ‚ã‚ã£ãŸã‘ã©ã€ä»Šã‚‚åŸºæœ¬ã¯å¿…è¦ï¼‰âš ï¸

### 2) switchå¼ï¼ˆå€¤ã‚’è¿”ã™switchï¼‰ğŸ¬âœ¨

* ã€Œåˆ†å²ã—ã¦ **å€¤ã‚’è¿”ã™**ã€ã®ãŒå¾—æ„
* å„åˆ†å²ã¯ `=>` ã§1ã¤ã®å¼ï¼ˆçŸ­ãã¦æ°—æŒã¡ã„ã„ï¼‰ğŸ’–
* ã ã„ãŸã„æœ€å¾Œã« `_ => ...`ï¼ˆãã®ä»–ï¼‰ã‚’ç½®ãã®ãŒå®šç•ªğŸ‘‘

switchå¼ã¯ã€Œæ¡ä»¶åˆ†å²ã§å€¤ã‚’æ±ºã‚ã‚‹ã€å ´é¢ã§è¶…ã¤ã‚ˆã„ã§ã™ğŸ’ªâœ¨ ([Microsoft Learn][3])

---

## Visual Studio ã®æ™‚çŸ­ãƒ¯ã‚¶âš¡ï¼šifâ†’switch å¤‰æ›ï¼ˆCtrl+.ï¼‰âŒ¨ï¸âœ¨

![refactoring_cs_study_032_magic_convert](./picture/refactoring_cs_study_032_magic_convert.png)

if ã® `if` ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«ã‚«ãƒ¼ã‚½ãƒ«ã‚’ç½®ã„ã¦ **Ctrl+.** ã‚’æŠ¼ã™ã¨ã€

* **switchã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã«å¤‰æ›**
* **switchå¼ã«å¤‰æ›**

ãŒé¸ã¹ã¾ã™ğŸ‰ï¼ˆã‚ã£ã¡ã‚ƒä¾¿åˆ©ï¼‰ ([Microsoft Learn][2])

> å¤‰æ›ã—ãŸã‚ã¨ã«ã€Œãƒ‘ã‚¿ãƒ¼ãƒ³ã€ã€Œwhenã€ã€Œor/andã€ãªã©ã‚’è¶³ã—ã¦ã€èª­ã¿ã‚„ã™ã•ã‚’ä»•ä¸Šã’ã‚‹ã®ãŒã‚³ãƒ„ã ã‚ˆğŸª„âœ¨

---

## ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã®â€œèªå½™â€ã‚’å¢—ã‚„ãã†ğŸ“šâœ¨

![refactoring_cs_study_032_pattern_toolbox](./picture/refactoring_cs_study_032_pattern_toolbox.png)

C# ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã¯ã€ã–ã£ãã‚Šã“ã†ã„ã†ç¨®é¡ãŒã‚ã‚Šã¾ã™ğŸ‘‡
ï¼ˆå…¨éƒ¨ã„ã£ãºã‚“ã«è¦šãˆãªãã¦OKï¼ã‚ˆãä½¿ã†ã®ã‹ã‚‰ã§å¤§ä¸ˆå¤«ğŸ˜Šï¼‰

* **å®šæ•°ãƒ‘ã‚¿ãƒ¼ãƒ³**ï¼š`0` / `"A"` / `true` ã¿ãŸã„ãªå€¤
* **å‹ãƒ‘ã‚¿ãƒ¼ãƒ³**ï¼š`int` / `string` ã¿ãŸã„ãªå‹
* **å®£è¨€ãƒ‘ã‚¿ãƒ¼ãƒ³**ï¼š`int x` ã¿ãŸã„ã«å—ã‘å–ã£ã¦å¤‰æ•°ã«ã™ã‚‹
* **é–¢ä¿‚ï¼ˆrelationalï¼‰**ï¼š`>= 10` ã¨ã‹
* **è«–ç†ï¼ˆand/or/notï¼‰**ï¼š`and` / `or` / `not`
* **ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ‘ã‚¿ãƒ¼ãƒ³**ï¼š`{ Status: "Paid" }` ã¿ãŸã„ã«ä¸­èº«ã‚’è¦‹ã‚‹
* **ã‚¿ãƒ—ãƒ«/ä½ç½®ãƒ‘ã‚¿ãƒ¼ãƒ³**ï¼š`(a, b)` ã‚„ record ã®å½¢
* **ãƒªã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³**ï¼š`[1, 2, ..]` ã¿ãŸã„ã«é…åˆ—ãƒ»ãƒªã‚¹ãƒˆã®å½¢ã‚’è¦‹ã‚‹
* **var / discard**ï¼š`var x` ã¨ `_`ï¼ˆæ¨ã¦ã‚‹ï¼‰ ([Microsoft Learn][1])

---

## å®Ÿä¾‹â‘ ï¼šifé€£é– â†’ switchå¼ï¼ˆåŸºæœ¬ï¼‰ğŸ£âœ¨

### Beforeï¼ˆifé€£é–ï¼‰ğŸ˜µâ€ğŸ’«

```csharp
static string GetRankMessage(int score)
{
    if (score >= 90) return "S";
    else if (score >= 80) return "A";
    else if (score >= 70) return "B";
    else if (score >= 60) return "C";
    else return "D";
}
```

### Afterï¼ˆswitchå¼ + relational patternsï¼‰ğŸ€âœ¨

```csharp
static string GetRankMessage(int score) =>
    score switch
    {
        >= 90 => "S",
        >= 80 => "A",
        >= 70 => "B",
        >= 60 => "C",
        _ => "D",
    };
```

**ãƒã‚¤ãƒ³ãƒˆğŸ’¡**

* ä¸Šã‹ã‚‰é †ã«ãƒãƒƒãƒã™ã‚‹ã‚ˆï¼ˆæœ€åˆã«å½“ãŸã£ãŸã‚„ã¤ãŒå‹ã¡ï¼‰ğŸ‘‘
* `>= 80` ã¯ã€Œ80ä»¥ä¸Šã€ã ã‘ã©ã€`>= 90` ãŒå…ˆã«ã‚ã‚‹ã‹ã‚‰OKğŸ‘Œ
* `_` ã¯ã€Œãã‚Œä»¥å¤–ã€ã£ã¦æ„å‘³ï¼ˆã ã„ãŸã„æœ€å¾Œï¼‰ğŸ§¹ ([Microsoft Learn][1])

---

## å®Ÿä¾‹â‘¡ï¼šwhenï¼ˆã‚¬ãƒ¼ãƒ‰ï¼‰ã§â€œè¿½åŠ æ¡ä»¶â€ã‚’ãã‚Œã„ã«æ›¸ãğŸŒ¿âœ¨

![refactoring_cs_study_032_tuple_grid](./picture/refactoring_cs_study_032_tuple_grid.png)

ã€Œç‰¹å®šã®å½¢ã«å½“ã¦ã¯ã¾ã‚‹ã‘ã©ã€ã•ã‚‰ã«æ¡ä»¶ãŒã‚ã‚‹ã€ã£ã¦ã¨ãã¯ `when` ãŒä¾¿åˆ©ğŸª„

ä¾‹ï¼šå‰²å¼•ç‡ã‚’æ±ºã‚ã‚‹ï¼ˆä¼šå“¡ãªã‚‰è¿½åŠ ã§æ¡ä»¶ï¼‰ğŸ’³âœ¨

```csharp
static decimal GetDiscountRate(bool isMember, int totalPrice) =>
    (isMember, totalPrice) switch
    {
        (true, >= 10000) => 0.10m,
        (true, _) when totalPrice >= 5000 => 0.05m,
        (false, >= 20000) => 0.03m,
        _ => 0.00m
    };
```

**ãƒã‚¤ãƒ³ãƒˆğŸ’¡**

* `(isMember, totalPrice)` ã¿ãŸã„ã« **ã‚¿ãƒ—ãƒ«**ã«ã—ã¦åˆ†å²ã™ã‚‹ã¨èª­ã¿ã‚„ã™ã„âœ¨
* `when` ã¯ã€Œè¿½åŠ ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã€ã¿ãŸã„ãªæ„Ÿè¦šğŸŒ¿
* `_` ã¯ã€Œãªã‚“ã§ã‚‚ã„ã„ã€ã£ã¦æ„å‘³ï¼ˆãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ï¼‰ğŸƒ ([Microsoft Learn][1])

---

## å®Ÿä¾‹â‘¢ï¼šå‹ã§åˆ†å²ï¼ˆtype patternï¼‰ğŸ§ ğŸ­

ã€Œobject ã¨ã—ã¦å—ã‘å–ã‚‹ã‘ã©ã€ä¸­èº«ã«ã‚ˆã£ã¦å‡¦ç†ãŒé•ã†ã€ã¿ãŸã„ãªå ´é¢ã§å¼·ã„ğŸ’ª

```csharp
static string Describe(object? value) =>
    value switch
    {
        null => "nullã§ã™",
        int i => $"intã§ã™: {i}",
        string s => $"stringã§ã™: \"{s}\"",
        DateTime dt => $"æ—¥ä»˜ã§ã™: {dt:yyyy-MM-dd}",
        _ => $"çŸ¥ã‚‰ãªã„å‹ã§ã™: {value.GetType().Name}",
    };
```

**ãƒã‚¤ãƒ³ãƒˆğŸ’¡**

* `int i` ã¿ãŸã„ã«æ›¸ãã¨ã€ãã®å‹ã®ã¨ãã ã‘ `i` ãŒä½¿ãˆã‚‹ã‚ˆğŸ€
* `null` ã‚‚ãƒ‘ã‚¿ãƒ¼ãƒ³ã§æ›¸ã‘ã‚‹ï¼ˆå…ˆã«æ›¸ãã¨å®‰å…¨ï¼‰ğŸ§· ([Microsoft Learn][1])

---

## å®Ÿä¾‹â‘£ï¼šãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆä¸­èº«ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§åˆ†å²ï¼‰ğŸ âœ¨

ä¾‹ï¼šæ³¨æ–‡ã®çŠ¶æ…‹ã«å¿œã˜ã¦è¡¨ç¤ºãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å¤‰ãˆã‚‹ğŸ“¦ğŸ’¬

```csharp
public sealed record Order(string Status, int TotalPrice, bool IsExpress);

static string GetOrderMessage(Order order) =>
    order switch
    {
        { Status: "Canceled" } => "ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¾ã—ãŸğŸ˜¢",
        { Status: "Paid", IsExpress: true } => "ãŠæ€¥ãä¾¿ã§ç™ºé€ã—ã¾ã™ğŸš€",
        { Status: "Paid", TotalPrice: >= 10000 } => "é«˜é¡æ³¨æ–‡ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ğŸ’–",
        { Status: "Paid" } => "ãŠæ”¯æ‰•ã„å®Œäº†ã§ã™âœ…",
        _ => "å‡¦ç†ä¸­ã§ã™âŒ›",
    };
```

**ãƒã‚¤ãƒ³ãƒˆğŸ’¡**

* `{ Status: "Paid" }` ã¿ãŸã„ã« **ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å½¢**ã§åˆ†å²ã§ãã‚‹ã‚ˆğŸ§©
* æ¡ä»¶ãŒå¢—ãˆã¦ã‚‚ã€Œä½•ã‚’è¦‹ã¦ã‚‹ã‹ã€ãŒèª­ã‚ã¦ã„ã„æ„Ÿã˜ğŸ‘€âœ¨ ([Microsoft Learn][1])

---

## å®Ÿä¾‹â‘¤ï¼šand / or / notï¼ˆæ¡ä»¶ã‚’â€œæ–‡ç« ã£ã½ãâ€ã¤ãªãï¼‰ğŸª„ğŸ“–

HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¿ãŸã„ã«ã€Œç¯„å›²ã€ã§åˆ†ã‘ãŸã„ã¨ãã«ä¾¿åˆ©ğŸ’¡

```csharp
static string ClassifyStatus(int statusCode) =>
    statusCode switch
    {
        >= 200 and < 300 => "Success âœ…",
        >= 400 and < 500 => "Client Error ğŸ§â€â™€ï¸ğŸ’¦",
        >= 500 and < 600 => "Server Error ğŸ–¥ï¸ğŸ”¥",
        _ => "Other ğŸ¤·â€â™€ï¸"
    };
```

**ãƒã‚¤ãƒ³ãƒˆğŸ’¡**

* `and` / `or` / `not` ã§æ¡ä»¶ã‚’åˆæˆã§ãã‚‹ã‚ˆâœ¨ ([Microsoft Learn][1])

---

## å®Ÿä¾‹â‘¥ï¼šãƒªã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆé…åˆ—ãƒ»ãƒªã‚¹ãƒˆã®â€œå½¢â€ã§åˆ†å²ï¼‰ğŸ“šğŸ¡

![refactoring_cs_study_032_list_scanner](./picture/refactoring_cs_study_032_list_scanner.png)

ã€Œè¦ç´ ã®ä¸¦ã³ã€ã§åˆ†ã‘ãŸã„ã¨ãã«ä½¿ãˆã‚‹ã‚ˆğŸ§
ï¼ˆé…åˆ—ãªã‚‰ç‰¹ã«ç›¸æ€§â—ï¼‰

```csharp
static string Analyze(int[] numbers) =>
    numbers switch
    {
        [] => "ç©ºã£ã½ã ã‚ˆğŸ«™",
        [0] => "0ã ã‘ã ã‚ˆ0ï¸âƒ£",
        [1, 2, ..] => "1,2ã§å§‹ã¾ã£ã¦ã‚‹ã‚ˆâœ¨",
        [var first, .. var rest] => $"å…ˆé ­ã¯ {first}ã€æ®‹ã‚Šã¯ {rest.Length} å€‹ã ã‚ˆğŸ“¦",
    };
```

**ãƒã‚¤ãƒ³ãƒˆğŸ’¡**

* `[]` ã¯ç©ºé…åˆ—
* `..` ã¯ã€Œæ®‹ã‚Šå…¨éƒ¨ã€ã£ã¦æ„Ÿã˜ï¼ˆã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã£ã½ã„ï¼‰âœ¨
* ãƒªã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€Œä¸¦ã³ã‚’è¦‹ã¦åˆ†ã‘ã‚‹ã€æ™‚ã«ã‚ã£ã¡ã‚ƒèª­ã¿ã‚„ã™ã„ã‚ˆğŸ¡ ([Microsoft Learn][1])

---

## â€œèª­ã¿ã‚„ã™ã„switchâ€ã®ã‚³ãƒ„é›†ğŸ§ âœ¨ï¼ˆè¶…ã ã„ã˜ï¼‰

### âœ… 1) ä¸Šã‹ã‚‰é †ã«è©•ä¾¡ã•ã‚Œã‚‹ï¼ˆæœ€åˆã«å½“ãŸã£ãŸã‚‰çµ‚äº†ï¼‰ğŸ‘‘

* ã€Œåºƒã„æ¡ä»¶ï¼ˆ`>= 0`ï¼‰ã€ã‚’å…ˆã«æ›¸ãã¨ã€å¾Œã‚ãŒæ­»ã¬ğŸ’€
* **ç‹­ã„æ¡ä»¶â†’åºƒã„æ¡ä»¶** ã®é †ãŒåŸºæœ¬ğŸ€

### âœ… 2) `_ =>`ï¼ˆãã‚Œä»¥å¤–ï¼‰ã¯æœ€å¾Œã«ç½®ãğŸ§¹

* switchå¼ãªã‚‰ç‰¹ã«ã€Œæœ€å¾Œã« `_`ã€ãŒå®‰å¿ƒğŸ›¡ï¸

### âœ… 3) 1ã‚±ãƒ¼ã‚¹ã¯çŸ­ãï¼ˆé•·ã„å‡¦ç†ã¯åˆ¥ãƒ¡ã‚½ãƒƒãƒ‰ã¸ï¼‰âœ‚ï¸

* switchã®ä¸­ã§ã‚´ãƒãƒ£ã‚´ãƒãƒ£ã™ã‚‹ã¨ã€é€†ã«èª­ã¿ã«ãã„ğŸ˜µâ€ğŸ’«
* ç›®å®‰ï¼š**case 1ã¤ï¼æ•°è¡Œä»¥å†…**âœ¨

### âœ… 4) switchå¼ã¯ã€Œå€¤ã‚’è¿”ã™ã€ã«å¯„ã›ã‚‹ğŸ¬

* å‰¯ä½œç”¨ï¼ˆãƒ­ã‚°å‡ºã™ãƒ»DBæ›¸ãï¼‰ã ã‚‰ã‘ã«ã—ãªã„æ–¹ãŒã‚­ãƒ¬ã‚¤ğŸ’–
* ã€Œæ±ºã‚ã‚‹ã€ã¨ã€Œã‚„ã‚‹ã€ã¯åˆ†ã‘ã‚‹ã¨è¶…èª­ã¿ã‚„ã™ã„ğŸ§

---

## AIæ‹¡å¼µã®ä½¿ã„æ–¹ï¼ˆå®‰å…¨é‹è»¢ï¼‰ğŸ¤–ğŸ›¡ï¸âœ¨

### ä½¿ãˆã‚‹ãŠé¡˜ã„ãƒ†ãƒ³ãƒ—ãƒ¬ğŸ“ğŸ’¡

* ã€Œã“ã® if/else ã‚’ switchå¼ã«å¤‰æ›ã—ã¦ã€‚**å‹•ä½œã¯å¤‰ãˆãªã„**ã§ã€`_ =>` ã‚’å…¥ã‚Œã¦ã€
* ã€Œã“ã®åˆ†å²ã€**property pattern** ã§èª­ã¿ã‚„ã™ãã—ã¦ã€‚æ¡ä»¶ã®é †ç•ªã‚‚æ³¨æ„ã—ã¦ã€
* ã€Œå¤‰æ›å¾Œã« **åŒã˜å…¥åŠ›ã§åŒã˜å‡ºåŠ›** ã«ãªã‚‹ç¢ºèªã‚³ãƒ¼ãƒ‰ï¼ˆãƒ†ã‚¹ãƒˆ/ç°¡æ˜“ãƒã‚§ãƒƒã‚¯ï¼‰ã‚‚ä»˜ã‘ã¦ã€

### æ¡ç”¨ãƒ«ãƒ¼ãƒ«âœ…

* å¤‰æ›ã—ãŸã‚‰ **å·®åˆ†ãƒ¬ãƒ“ãƒ¥ãƒ¼**ï¼ˆæ„å›³ã¨ä¸€è‡´ã—ã¦ã‚‹ï¼Ÿï¼‰ğŸ‘€ğŸ“Œ
* **ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ** or æœ€ä½ã§ã‚‚ä»£è¡¨ã‚±ãƒ¼ã‚¹ã‚’æ‰‹ã§ç¢ºèªâœ…
* 1å›ã®å¤‰æ›´ã¯å°ã•ãï¼ˆ1ã‚³ãƒŸãƒƒãƒˆåˆ†ï¼‰ğŸŒ¿

---

## ãƒŸãƒ‹æ¼”ç¿’ï¼ˆæ‰‹ã‚’å‹•ã‹ãã†ğŸ–ï¸âœ¨ï¼‰

### æ¼”ç¿’1ğŸ£ï¼šç‚¹æ•°â†’è©•ä¾¡ï¼ˆswitchå¼ï¼‰

æ¬¡ã® if ã‚’ switchå¼ã«ã—ã¦ã­ğŸ€

```csharp
static string Grade(int score)
{
    if (score >= 80) return "Good";
    else if (score >= 60) return "OK";
    else return "NG";
}
```

**ä¾‹ï¼ˆç­”ãˆã®ä¸€ã¤ï¼‰âœ¨**

```csharp
static string Grade(int score) =>
    score switch
    {
        >= 80 => "Good",
        >= 60 => "OK",
        _ => "NG"
    };
```

---

### æ¼”ç¿’2ğŸ¤ï¼šã‚¿ãƒ—ãƒ« + whenï¼ˆã¡ã‚‡ã„é›£ï¼‰ğŸŒ¿

ã€Œä¼šå“¡ã€ã€Œé‡‘é¡ã€ã§é€æ–™ã‚’æ±ºã‚ã¦ã­ğŸššâœ¨

ãƒ«ãƒ¼ãƒ«ï¼š

* ä¼šå“¡ã§ 5000ä»¥ä¸Š â†’ é€æ–™0
* ä¼šå“¡ã§ 5000æœªæº€ â†’ é€æ–™300
* éä¼šå“¡ã§ 10000ä»¥ä¸Š â†’ é€æ–™200
* ãã‚Œä»¥å¤– â†’ é€æ–™500

**ãƒ’ãƒ³ãƒˆ**ï¼š`(isMember, total)` ã‚’ switch ã™ã‚‹ã¨èª­ã¿ã‚„ã™ã„ã‚ˆğŸ€

**ä¾‹ï¼ˆç­”ãˆã®ä¸€ã¤ï¼‰âœ¨**

```csharp
static int ShippingFee(bool isMember, int total) =>
    (isMember, total) switch
    {
        (true, >= 5000) => 0,
        (true, _) => 300,
        (false, >= 10000) => 200,
        _ => 500
    };
```

---

### æ¼”ç¿’3ğŸ¦„ï¼šãƒªã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆé…åˆ—ã®å½¢ï¼‰ğŸ¡

`int[] numbers` ã«ã¤ã„ã¦â€¦

* ç©ºãªã‚‰ `"Empty"`
* å…ˆé ­ãŒ 0 ãªã‚‰ `"StartsWithZero"`
* å…ˆé ­ãŒ 1,2 ãªã‚‰ `"StartsWith1And2"`
* ãã‚Œä»¥å¤–ã¯ `"Other"`

ã§è¿”ã™é–¢æ•°ã‚’æ›¸ã„ã¦ã¿ã¦ã­âœ¨

**ä¾‹ï¼ˆç­”ãˆã®ä¸€ã¤ï¼‰âœ¨**

```csharp
static string Detect(int[] numbers) =>
    numbers switch
    {
        [] => "Empty",
        [0, ..] => "StartsWithZero",
        [1, 2, ..] => "StartsWith1And2",
        _ => "Other"
    };
```

---

## ã¾ã¨ã‚ğŸŒˆâœ¨

* ifé€£é–ã¯å¢—ãˆã‚‹ã»ã©èª­ã¿ã«ãããªã‚‹ã‘ã©ã€**switch + ãƒ‘ã‚¿ãƒ¼ãƒ³**ã§ã‚¹ãƒƒã‚­ãƒªã§ãã‚‹ã‚ˆğŸ›ï¸âœ¨
* **switchå¼**ã¯ã€Œåˆ†å²ã—ã¦å€¤ã‚’è¿”ã™ã€å ´é¢ã§ç‰¹ã«å¼·ã„ğŸ¬
* ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€Œå½¢ã§åˆ†ã‘ã‚‹ã€ç™ºæƒ³ï¼šå‹ãƒ»å€¤ãƒ»ç¯„å›²ãƒ»ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ»é…åˆ—ã®ä¸¦ã³ã¾ã§æ‰±ãˆã‚‹ğŸ§©ğŸ’– ([Microsoft Learn][1])
* VS ã® **Ctrl+.** å¤‰æ›ã§é€Ÿæ”»ã‚¹ã‚¿ãƒ¼ãƒˆã—ã¦ã€æœ€å¾Œã«èª­ã¿ã‚„ã™ã•ã‚’æ•´ãˆã‚‹ã®ãŒå‹ã¡ğŸ†âœ¨ ([Microsoft Learn][2])

[1]: https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/operators/patterns?utm_source=chatgpt.com "Pattern matching using the is and switch expressions. - C# ..."
[2]: https://learn.microsoft.com/en-us/visualstudio/ide/reference/convert-if-statement-to-switch-statement-or-switch-expression?view=visualstudio&utm_source=chatgpt.com "Convert if statement to switch statement or expression"
[3]: https://learn.microsoft.com/en-us/dotnet/csharp/fundamentals/functional/pattern-matching?utm_source=chatgpt.com "Pattern matching overview - C#"
